#!/bin/bash

source "$(dirname $0)/../lib/libem.bash"

function em.configure() {
        cd "${MODULE_SRCDIR}"
	"${MODULE_SRCDIR}"/configure \
		--prefix="${EM_PREFIX}/core" \
		--with-module-root-path="${MODULEPATH_ROOT}" \
		|| exit 1
}

function em.build() {
        cd "${MODULE_SRCDIR}"

	make -j ${JOBS}
}

# use system gcc to compile
declare -rx CC=gcc

em.supported_os ''
em.add_to_family 'Tools'
em.set_build_dependencies "lua"
em.make_all
em.cleanup_src
