#%Module

module-whatis	        "EMAN2 is a broadly based greyscale scientific image processing suite with a primary focus on processing data from transmission electron microscopes "
module-url		"https://blake.bcm.edu/emanwiki/EMAN2"
module-license	        "GNU gerneral public license: GPLv2"
module-maintainer	"Greta Assmann  <greta.assmann@psi.ch>"

module-help	"EMAN2 is a broadly based greyscale scientific image processing suite with a primary focus on processing data from transmission electron microscopes. EMAN's original purpose was performing single particle reconstructions (3-D volumetric models from 2-D cryo-EM images) at the highest possible resolution, but the suite now also offers support for single particle cryo-ET, and tools useful in many other subdisciplines such as helical reconstruction, 2-D crystallography and whole-cell tomography. EMAN2 is capable of processing large data sets (>100,000 particle) very efficiently"

# Check for supported shell types
set shelltype [module-info shelltype]
switch -- $shelltype {
    "sh" {
        puts stdout "conda(){ :; };"
        puts stdout "set +u"
        puts stdout "source \"${PREFIX}\"/miniconda/etc/profile.d/conda.sh;\n"
    }
    default {
        puts stderr "Shells of type '$shelltype' are NOT supported!"
    }
}


switch [module-info mode] {
    "load" {
      # Relies on the anaconda module being loaded since we need to update the path
      puts stdout "conda activate ${P}_${V};\n"
    }
    "unload" -
    "remove" {
        puts stdout "conda deactivate;\n"
    }
}

