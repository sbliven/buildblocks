#!/usr/bin/env modbuild
#
# Notes:
#   On Mac OS X VTK does not compile out of the box with self-compiled GCC.
#   grep for "long-branch" and "pascal-string" in the cmake configuration
#   and remove these strings.
#

SOURCE_URL="http://www.vtk.org/files/release/${V_MAJOR}.${V_MINOR}/VTK-$V.tar.gz"

case ${OS} in
Darwin )
	pbuild::pre_configure() {
		# for the time being: on Mac OS X we need GL/gl.h from MacPorts:
		std::append_path C_INLCUDE_PATH '/opt/local/include'
		std::append_path CPLUS_INCLUDE_PATH '/opt/local/include'
	}
	;;
esac

pbuild::configure() {
	cmake -DCMAKE_INSTALL_PREFIX:PATH=$PREFIX \
		-DVTK_INSTALL_INCLUDE_DIR:PATH=include \
		-DVTK_INSTALL_LIB_DIR:PATH=lib \
		-DVTK_USE_COCOA:BOOL=OFF \
		"${MODULE_SRCDIR}"
}

pbuild::add_to_group 'Compiler'
pbuild::make_all

