#!/usr/bin/env modbuild

BOOST_BUILD_PATH="${MODULE_BUILDDIR}"

pbuild::configure() {
	cd "${MODULE_SRCDIR}"
	"${MODULE_SRCDIR}"/bootstrap.sh \
		--prefix="${PREFIX}" \
		--with-libraries=all \
		--with-python-root="${PYTHON_PREFIX}" \
		|| exit 1
}

pbuild::build() {
	cd "${MODULE_SRCDIR}"
	./b2 \
		--build-type=minimal \
		--build-dir="${MODULE_BUILDDIR}" \
		--layout=system \
		--without-mpi \
		variant=release \
		link=shared \
		threading=multi \
		stage
}

pbuild::install() {
	cd "${MODULE_SRCDIR}"
	./b2 \
		--build-type=minimal \
		--build-dir="${MODULE_BUILDDIR}" \
		--layout=system \
		--without-mpi \
		variant=release \
		link=shared \
		threading=multi \
		install
}

pbuild::add_to_group 'Compiler'
pbuild::set_runtime_dependencies "${COMPILER}"
pbuild::set_build_dependencies "${COMPILER}" 'Python'
pbuild::make_all

